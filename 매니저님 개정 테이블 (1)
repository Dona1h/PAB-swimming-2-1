<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAB ìˆ˜ì˜ì¥ ë§¤ë‹ˆì € ê¸‰ì—¬ ë° ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header .subtitle {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .header-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .header-info-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .header-info-item strong {
            display: block;
            color: #667eea;
            margin-bottom: 5px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.5em;
        }

        .timeline-container {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .timeline-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .highlight {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
            border-radius: 5px;
        }

        .info-box {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin: 15px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            padding: 15px;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
            border-radius: 5px;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }

        .chart-container-small {
            position: relative;
            height: 150px;
            margin: 20px 0;
        }

        ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        li {
            margin: 8px 0;
            line-height: 1.6;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        .chart-container-small {
            position: relative;
            height: 150px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŠâ€â™‚ï¸ PAB ìˆ˜ì˜ì¥ ë§¤ë‹ˆì € ê¸‰ì—¬ ë° ê·¼ë¬´ì‹œê°„ ëŒ€ì‹œë³´ë“œ</h1>
            <div class="subtitle">2026ë…„ 3ì›” ê°œì • ê¸°ì¤€</div>
            
            <div class="header-info">
                <div class="header-info-item">
                    <strong>ìµœì €ì‹œê¸‰</strong>
                    10,320ì› (2026ë…„)
                </div>
                <div class="header-info-item">
                    <strong>ì‚¬ì—…ì¥ ê·œëª¨</strong>
                    ìƒì‹œ 5ì¸ ì´ìƒ (ì—°ì¥Â·ì•¼ê°„ ê°€ì‚° ì ìš©)
                </div>
                <div class="header-info-item">
                    <strong>ì›” í™˜ì‚°</strong>
                    52ì£¼/12ê°œì›” = 4.3333ì£¼/ì›”
                </div>
                <div class="header-info-item">
                    <strong>íŒŒíŠ¸ í† ìš”ì¼</strong>
                    ì‹¤ì œ íšŸìˆ˜ë§Œí¼ ì¶”ê°€ ì§€ê¸‰
                </div>
                <div class="header-info-item">
                    <strong>ì‹¤ì¥ í† ìš”ì¼</strong>
                    ê²©ì£¼ ê³ ì • (1,3ì£¼ ë˜ëŠ” 2,4ì£¼)
                </div>
            </div>
        </div>

        <!-- í‰ì¼ ê·¼ë¬´ì‹œê°„ íƒ€ì„ë¼ì¸ -->
        <div class="card full-width">
            <h2>ğŸ“… í‰ì¼ ê·¼ë¬´ì‹œê°„ íƒ€ì„ë¼ì¸</h2>
            <div class="chart-container">
                <canvas id="weekdayChart"></canvas>
            </div>
            <div class="info-box">
                <strong>ğŸ”„ ì¸ìˆ˜ì¸ê³„ êµ¬ê°„:</strong><br>
                â€¢ ì˜¤ì „ íŒŒíŠ¸ â†” ì‹¤ì¥: 9:25~9:40 (15ë¶„)<br>
                â€¢ ì‹¤ì¥ â†” ì˜¤í›„ íŒŒíŠ¸: 18:10~18:25 (15ë¶„)
            </div>
            <div class="highlight">
                <strong>â˜• íœ´ê²Œì‹œê°„:</strong><br>
                â€¢ ì˜¤ì „ íŒŒíŠ¸: 8:20~8:30 (10ë¶„, ë¬´ê¸‰)<br>
                â€¢ ì‹¤ì¥: 14:30~15:30 (1ì‹œê°„, ë¬´ê¸‰)<br>
                â€¢ ì˜¤í›„ íŒŒíŠ¸: 21:30~21:40 (10ë¶„, ë¬´ê¸‰)
            </div>
        </div>

        <div class="grid">
            <!-- ì£¼ë§ ê·¼ë¬´ì‹œê°„ íƒ€ì„ë¼ì¸ -->
            <div class="card">
                <h2>ğŸ“… ì£¼ë§(í† ìš”ì¼) ê·¼ë¬´ì‹œê°„</h2>
                <div class="chart-container-small">
                    <canvas id="weekendChart"></canvas>
                </div>
                <div class="highlight">
                    <strong>â˜• íœ´ê²Œì‹œê°„:</strong> 6:20~6:30, 8:20~8:30, 10:20~10:30 (ê° 10ë¶„, ì´ 30ë¶„ ë¬´ê¸‰)
                </div>
            </div>
        </div>

        <!-- ìœ ê¸‰ ê·¼ë¡œì‹œê°„ ì‚°ì • -->
        <div class="card full-width">
            <h2>â±ï¸ ìœ ê¸‰ ê·¼ë¡œì‹œê°„ ì‚°ì •</h2>
            <table>
                <thead>
                    <tr>
                        <th>êµ¬ë¶„</th>
                        <th>ë°°ì¹˜/ì²´ë¥˜</th>
                        <th>ë¬´ê¸‰íœ´ê²Œ</th>
                        <th>ìœ ê¸‰ ê·¼ë¡œì‹œê°„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>íŒŒíŠ¸ (í‰ì¼)</strong></td>
                        <td>4:00 ì²´ë¥˜</td>
                        <td>0:10 (ì¤‘ê°„ 1íšŒ)</td>
                        <td><strong>3:50 (3.8333h)</strong></td>
                    </tr>
                    <tr>
                        <td><strong>ì‹¤ì¥ (í‰ì¼)</strong></td>
                        <td>9:25 ~ 18:25</td>
                        <td>1:00</td>
                        <td><strong>8:00 (8.0h)</strong></td>
                    </tr>
                    <tr>
                        <td><strong>í† ìš”ì¼ (ê³µí†µ)</strong></td>
                        <td>ì´ 5:00 ê·¼ë¬´</td>
                        <td>0:30 (ì¤‘ê°„ 1íšŒ)</td>
                        <td><strong>4:30 (4.5h)</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ê¸‰ì—¬ ì‚°ì¶œí‘œ -->
        <div class="card full-width">
            <h2>ğŸ’° ê¸‰ì—¬ ì‚°ì¶œí‘œ (ì„¸ì „)</h2>
            <table>
                <thead>
                    <tr>
                        <th>êµ¬ë¶„</th>
                        <th>ì›” ê³ ì •ë¶„</th>
                        <th>í† ìš”ì¼ 1íšŒë‹¹</th>
                        <th>ì›”ê¸‰ ì‚°ì‹</th>
                        <th>ë¹„ê³ </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ì˜¤ì „ íŒŒíŠ¸</strong></td>
                        <td>1,065,827ì›</td>
                        <td>49,307ì›</td>
                        <td>1,065,827 + (í†  ì‹¤ì œíšŸìˆ˜ Ã— 49,307)</td>
                        <td>í‰ì¼ ì•¼ê°„: 05:40~06:00 (20ë¶„)</td>
                    </tr>
                    <tr>
                        <td><strong>ì˜¤í›„ íŒŒíŠ¸</strong></td>
                        <td>1,047,193ì›</td>
                        <td>49,307ì›</td>
                        <td>1,047,193 + (í†  ì‹¤ì œíšŸìˆ˜ Ã— 49,307)</td>
                        <td>í‰ì¼ ì•¼ê°„: 22:00~22:10 (10ë¶„)</td>
                    </tr>
                    <tr>
                        <td><strong>ì‹¤ì¥</strong></td>
                        <td>2,146,560ì›</td>
                        <td>65,360ì›</td>
                        <td>2,146,560 + (í†  ì‹¤ì œíšŸìˆ˜ Ã— 65,360)</td>
                        <td>í† ìš”ì¼: ì£¼40 ì´ˆê³¼ 4.5h ì—°ì¥ê°€ì‚°</td>
                    </tr>
                    <tr style="background-color: #f0f8ff;">
                        <td><strong>ì‹¤ì¥ (ì›”í‰ê· )</strong></td>
                        <td colspan="2">ì—° 26íšŒ(ê²©ì£¼) í‰ê· </td>
                        <td><strong>ì•½ 2,288,173ì›/ì›”</strong></td>
                        <td>52ì£¼/12ê°œì›” í™˜ì‚°</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- ê¸‰ì—¬ ì‚°ì‹ ìƒì„¸ -->
        <div class="card full-width">
            <h2>ğŸ§® ê¸‰ì—¬ ì‚°ì‹ ìƒì„¸ (ê²€ì¦ìš©)</h2>
            
            <div class="timeline-container">
                <div class="timeline-title">ğŸ“Š íŒŒíŠ¸ ê¸‰ì—¬ ê³„ì‚°</div>
                <ul>
                    <li><strong>ì›” ê³ ì •ë¶„ ê¸°ë³¸ê¸‰:</strong> [(3.8333h Ã— 5ì¼) + ì£¼íœ´ 3.8333h] Ã— 4.3333ì£¼ Ã— 10,320ì› = <strong>1,028,560ì›</strong></li>
                    <li><strong>ì˜¤ì „ íŒŒíŠ¸ í‰ì¼ ì•¼ê°„ê°€ì‚° (50%):</strong> (0.3333h Ã— 5ì¼ Ã— 4.3333ì£¼) Ã— 10,320ì› Ã— 0.5 = <strong>37,267ì›</strong></li>
                    <li><strong>ì˜¤í›„ íŒŒíŠ¸ í‰ì¼ ì•¼ê°„ê°€ì‚° (50%):</strong> (0.1667h Ã— 5ì¼ Ã— 4.3333ì£¼) Ã— 10,320ì› Ã— 0.5 = <strong>18,633ì›</strong></li>
                </ul>
            </div>

            <div class="timeline-container">
                <div class="timeline-title">ğŸ“Š íŒŒíŠ¸ í† ìš”ì¼ 1íšŒë‹¹</div>
                <ul>
                    <li>ê¸°ë³¸ê¸‰: 4.5h Ã— 10,320ì› = <strong>46,440ì›</strong></li>
                    <li>í† ìš”ì¼ ì•¼ê°„ê°€ì‚°: 0.3333h Ã— 10,320ì› Ã— 0.5 = <strong>1,720ì›</strong></li>
                    <li>ì£¼íœ´ ì¦ë¶„ (ì•½ 6ë¶„ 40ì´ˆ) = <strong>1,147ì›</strong></li>
                    <li><strong>í•©ê³„: 49,307ì›</strong></li>
                </ul>
            </div>

            <div class="timeline-container">
                <div class="timeline-title">ğŸ“Š ì‹¤ì¥ ê¸‰ì—¬ ê³„ì‚°</div>
                <ul>
                    <li><strong>ì›” ê³ ì •ë¶„:</strong> [(8.0h Ã— 5ì¼) + ì£¼íœ´ 8.0h] Ã— 4.3333ì£¼ Ã— 10,320ì› = <strong>2,146,560ì›</strong></li>
                </ul>
            </div>

            <div class="timeline-container">
                <div class="timeline-title">ğŸ“Š ì‹¤ì¥ í† ìš”ì¼ 1íšŒë‹¹</div>
                <ul>
                    <li>ê¸°ë³¸ê¸‰: 4.5h Ã— 10,320ì› = <strong>46,440ì›</strong></li>
                    <li>í† ìš”ì¼ ì•¼ê°„ê°€ì‚°: 0.3333h Ã— 10,320ì› Ã— 0.5 = <strong>1,720ì›</strong></li>
                    <li>ì—°ì¥ê°€ì‚° (ì£¼40 ì´ˆê³¼): 4.5h Ã— 10,320ì› Ã— 0.5 = <strong>23,220ì›</strong></li>
                    <li>ì£¼íœ´ ì¡°ì •ë¶„ = <strong>-6,020ì›</strong></li>
                    <li><strong>í•©ê³„: 65,360ì›</strong></li>
                </ul>
            </div>
        </div>

        <!-- ë²•ì  ì£¼ì˜ì‚¬í•­ -->
        <div class="card full-width">
            <h2>âš–ï¸ ìš´ì˜ìƒ ë²•ì  ì£¼ì˜ì‚¬í•­</h2>
            
            <div class="warning-box">
                <h3>ğŸ”´ í•„ìˆ˜ ì¤€ìˆ˜ì‚¬í•­</h3>
                <ul>
                    <li><strong>ë¬´ê¸‰íœ´ê²Œ (í† ìš”ì¼ 30ë¶„ í¬í•¨):</strong> "ììœ ì´ìš©" ë³´ì¥ í•„ìˆ˜ â†’ ëŒ€ê¸°/ê°ì‹œ/ì½œ ëŒ€ì‘ì´ ë¶™ìœ¼ë©´ ê·¼ë¡œì‹œê°„ìœ¼ë¡œ íŒë‹¨ë  ìœ„í—˜</li>
                    <li><strong>ì£¼íœ´ìˆ˜ë‹¹ ë° ì§€ê°Â·ì¡°í‡´:</strong> 1ì£¼ ì†Œì •ê·¼ë¡œì¼ ê°œê·¼ ìš”ê±´ ì¶©ì¡± ì‹œ ë°œìƒ. ì§€ê°Â·ì¡°í‡´ëŠ” ì›ì¹™ì ìœ¼ë¡œ ê²°ê·¼ìœ¼ë¡œ ê°„ì£¼í•˜ì§€ ì•ŠëŠ” ë°©í–¥ì˜ í–‰ì •í•´ì„ì´ ë‹¤ìˆ˜</li>
                    <li><strong>í† ìš”ì¼ ê·¼ë¬´:</strong> ê³„ì•½ ì‹œ ê·¼ë¬´ì¼ì„ ì›”~í† ë¡œ í¸ì„±í•˜ëŠ” ê²½ìš° íœ´ì¼ê·¼ë¡œ ê°€ì‚°(50%) ì—†ìŒ, ì£¼ 40ì‹œê°„ ì´ˆê³¼ë¶„ë§Œ ì—°ì¥ê°€ì‚° ì²˜ë¦¬ ê°€ëŠ¥</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ì‹œê°„ì„ ìˆ«ìë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ (5:40 -> 5.67)
        function timeToDecimal(hour, minute) {
            return hour + (minute / 60);
        }

        // ëŒ€ê°ì„  íŒ¨í„´ ìƒì„± í•¨ìˆ˜ (íœ´ê²Œì‹œê°„ìš©)
        function createDiagonalPattern(color) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 10;
            canvas.height = 10;
            
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, 10, 10);
            
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, 10);
            ctx.lineTo(10, 0);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(-5, 5);
            ctx.lineTo(5, -5);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(5, 15);
            ctx.lineTo(15, 5);
            ctx.stroke();
            
            return ctx.createPattern(canvas, 'repeat');
        }

        // í‰ì¼ ê·¼ë¬´ì‹œê°„ íƒ€ì„ë¼ì¸
        const weekdayCtx = document.getElementById('weekdayChart').getContext('2d');
        
        new Chart(weekdayCtx, {
            type: 'bar',
            data: {
                labels: ['ì˜¤ì „ íŒŒíŠ¸', 'ì¸ìˆ˜ì¸ê³„', 'ì‹¤ì¥', 'ì¸ìˆ˜ì¸ê³„', 'ì˜¤í›„ íŒŒíŠ¸'],
                datasets: [
                    // ì˜¤ì „ íŒŒíŠ¸ ê·¼ë¬´ì‹œê°„
                    {
                        label: 'ì˜¤ì „ íŒŒíŠ¸ ê·¼ë¬´',
                        data: [[timeToDecimal(5, 40), timeToDecimal(9, 40)], null, null, null, null],
                        backgroundColor: 'rgba(255, 159, 64, 0.9)',
                        borderColor: 'rgb(255, 159, 64)',
                        borderWidth: 2
                    },
                    // ì˜¤ì „ íŒŒíŠ¸ íœ´ê²Œì‹œê°„
                    {
                        label: 'íœ´ê²Œì‹œê°„',
                        data: [[timeToDecimal(8, 20), timeToDecimal(8, 30)], null, null, null, null],
                        backgroundColor: createDiagonalPattern('rgb(255, 99, 132)'),
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2
                    },
                    // ì¸ìˆ˜ì¸ê³„ 1: ì˜¤ì „ (ì‹¤ì¥ ë°”ë¡œ ìœ„)
                    {
                        label: 'ì¸ìˆ˜ì¸ê³„ (9:25~9:40 / 18:10~18:25)',
                        data: [null, [timeToDecimal(9, 25), timeToDecimal(9, 40)], null, null, null],
                        backgroundColor: 'rgba(255, 206, 86, 0.9)',
                        borderColor: 'rgb(255, 193, 37)',
                        borderWidth: 3
                    },
                    // ì‹¤ì¥ ê·¼ë¬´ì‹œê°„
                    {
                        label: 'ì‹¤ì¥ ê·¼ë¬´',
                        data: [null, null, [timeToDecimal(9, 25), timeToDecimal(18, 25)], null, null],
                        backgroundColor: 'rgba(75, 192, 192, 0.9)',
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 2
                    },
                    // ì‹¤ì¥ íœ´ê²Œì‹œê°„
                    {
                        label: 'íœ´ê²Œì‹œê°„ (ì‹¤ì¥)',
                        data: [null, null, [timeToDecimal(14, 30), timeToDecimal(15, 30)], null, null],
                        backgroundColor: createDiagonalPattern('rgb(255, 99, 132)'),
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2
                    },
                    // ì¸ìˆ˜ì¸ê³„ 2: ì˜¤í›„ (ì‹¤ì¥ ë°”ë¡œ ì•„ë˜)
                    {
                        label: 'ì¸ìˆ˜ì¸ê³„ 2',
                        data: [null, null, null, [timeToDecimal(18, 10), timeToDecimal(18, 25)], null],
                        backgroundColor: 'rgba(255, 206, 86, 0.9)',
                        borderColor: 'rgb(255, 193, 37)',
                        borderWidth: 3
                    },
                    // ì˜¤í›„ íŒŒíŠ¸ ê·¼ë¬´ì‹œê°„
                    {
                        label: 'ì˜¤í›„ íŒŒíŠ¸ ê·¼ë¬´',
                        data: [null, null, null, null, [timeToDecimal(18, 10), timeToDecimal(22, 10)]],
                        backgroundColor: 'rgba(153, 102, 255, 0.9)',
                        borderColor: 'rgb(153, 102, 255)',
                        borderWidth: 2
                    },
                    // ì˜¤í›„ íŒŒíŠ¸ íœ´ê²Œì‹œê°„
                    {
                        label: 'íœ´ê²Œì‹œê°„ (ì˜¤í›„)',
                        data: [null, null, null, null, [timeToDecimal(21, 30), timeToDecimal(21, 40)]],
                        backgroundColor: createDiagonalPattern('rgb(255, 99, 132)'),
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 2
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'bottom',
                        labels: {
                            boxWidth: 20,
                            padding: 10,
                            font: {
                                size: 11
                            },
                            filter: function(item, chart) {
                                // ì¤‘ë³µ ë²”ë¡€ ì œê±°
                                if (item.text === 'ì¸ìˆ˜ì¸ê³„ 2') return false;
                                if (item.text === 'íœ´ê²Œì‹œê°„ (ì‹¤ì¥)' || item.text === 'íœ´ê²Œì‹œê°„ (ì˜¤í›„)') return false;
                                return true;
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: 'í‰ì¼ ìš´ì˜ íƒ€ì„ë¼ì¸ (5:40 ~ 22:10)',
                        font: {
                            size: 16,
                            weight: 'bold'
                        },
                        padding: 15
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                if (!context.raw) return '';
                                const start = context.raw[0];
                                const end = context.raw[1];
                                const startHour = Math.floor(start);
                                const startMin = Math.round((start - startHour) * 60);
                                const endHour = Math.floor(end);
                                const endMin = Math.round((end - endHour) * 60);
                                const duration = end - start;
                                const durationMin = Math.round(duration * 60);
                                
                                let label = context.dataset.label;
                                if (label === 'ì¸ìˆ˜ì¸ê³„ 2') label = 'ì¸ìˆ˜ì¸ê³„';
                                if (label === 'íœ´ê²Œì‹œê°„ (ì‹¤ì¥)' || label === 'íœ´ê²Œì‹œê°„ (ì˜¤í›„)') label = 'íœ´ê²Œì‹œê°„';
                                
                                return `${label}: ${startHour}:${startMin.toString().padStart(2, '0')} ~ ${endHour}:${endMin.toString().padStart(2, '0')} (${durationMin}ë¶„)`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        min: 5,
                        max: 23,
                        ticks: {
                            stepSize: 1,
                            callback: function(value) {
                                return value + ':00';
                            },
                            font: {
                                size: 11
                            }
                        },
                        title: {
                            display: true,
                            text: 'ì‹œê°„ (24ì‹œê°„ ê¸°ì¤€)',
                            font: {
                                size: 13,
                                weight: 'bold'
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            lineWidth: 1
                        }
                    },
                    y: {
                        stacked: false,
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // ì£¼ë§ ê·¼ë¬´ì‹œê°„ ì°¨íŠ¸
        const weekendCtx = document.getElementById('weekendChart').getContext('2d');
        new Chart(weekendCtx, {
            type: 'bar',
            data: {
                labels: ['í† ìš”ì¼'],
                datasets: [
                    {
                        label: 'ê·¼ë¬´ì‹œê°„',
                        data: [[timeToDecimal(5, 40), timeToDecimal(10, 40)]],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgb(54, 162, 235)',
                        borderWidth: 2
                    },
                    {
                        label: 'íœ´ê²Œì‹œê°„',
                        data: [[timeToDecimal(6, 20), timeToDecimal(10, 30)]],
                        backgroundColor: 'rgba(255, 99, 132, 0)',
                        borderColor: 'transparent',
                        borderWidth: 0,
                        segments: {
                            borderColor: ctx => {
                                const value = ctx.p0.parsed.x;
                                if ((value >= timeToDecimal(6, 20) && value <= timeToDecimal(6, 30)) ||
                                    (value >= timeToDecimal(8, 20) && value <= timeToDecimal(8, 30)) ||
                                    (value >= timeToDecimal(10, 20) && value <= timeToDecimal(10, 30))) {
                                    return 'rgb(255, 99, 132)';
                                }
                                return 'transparent';
                            }
                        }
                    }
                ]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: 'ì£¼ë§ ê·¼ë¬´ íƒ€ì„ë¼ì¸ (5:40 ~ 10:40)',
                        font: {
                            size: 14
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                if (context.datasetIndex === 0) {
                                    return 'ê·¼ë¬´: 5:40 ~ 10:40 (ì´ 5ì‹œê°„, ìœ ê¸‰ 4.5ì‹œê°„)';
                                }
                                return '';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        min: 5,
                        max: 11,
                        ticks: {
                            callback: function(value) {
                                return value + ':00';
                            }
                        },
                        title: {
                            display: true,
                            text: 'ì‹œê°„'
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
